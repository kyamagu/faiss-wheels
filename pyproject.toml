[build-system]
requires = [
    "setuptools>=68.0",
    "wheel",
    "oldest-supported-numpy; python_version>='3.5'",
]
build-backend = "setuptools.build_meta"

[tool.pytest.ini_options]
minversion = "6.0"
addopts = [
    "-v",
    "--capture=fd",
]
testpaths = ["faiss/tests"]

[tool.cibuildwheel]
skip = "cp36-* cp37-* pp* *-musllinux*"
test-skip = "*-macosx_arm64 *-manylinux_aarch64 *-win_amd64"

test-requires = ["pytest", "scipy"]
test-command = "pytest {project}/faiss/tests"

[tool.cibuildwheel.windows]
before-build = "pip install delvewheel"
repair-wheel-command = "delvewheel repair -v -w {dest_dir} {wheel}"
